---
title: "2023å¹´ ã‚ãŸã—ã® Neovim"
emoji: "ğŸ˜½"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Neovim"]
published: false
---

# ã¯ã˜ã‚ã«

ã“ã‚“ã«ã¡ã¯ã€ã‚ã‚ãƒ¼ã§ã™ã€‚

Neovim ã‚’ãƒ¡ã‚¤ãƒ³ã®ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã—ã¦ä½¿ã„ã¯ã˜ã‚ã¦ã‹ã‚‰ã€[ã¡ã‚‡ã†ã©ä¸€å¹´ãã‚‰ã„](https://github.com/arrow2nd/dotfiles/commit/0a635a4e4ea3e47520404a3df8697f98c3ff5875) ãŒçµŒã£ã¦ã„ã¾ã—ãŸã€‚

ã²ã¨ã¤ã®åŒºåˆ‡ã‚Šã¨ã—ã¦ã€ãªã‚“ã ã‹ã¡ã‚‡ã†ã©è‰¯ã„æ„Ÿã˜ãŒã—ãŸã®ã§ç¾åœ¨ã®ã‚ãŸã—ã®ç’°å¢ƒã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

# ã“ã‚“ãªæ„Ÿã˜

![neovim](/images/aa2605c67efdb0/neovim.png)

# è¨­å®šã®æ–¹é‡

å³å¯†ã«å®ˆã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ä»¥ä¸‹ã®æ–¹é‡ã§è¨­å®šã—ã¦ã„ã¾ã™ã€‚

- è¨­å®šã¯åŸºæœ¬ Lua ã§æ›¸ãã¾ã™
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹è¨€èªã¯å•ã„ã¾ã›ã‚“ï¼ˆVim script ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‰ä½¿ã‚ãªã„ãªã©ã¯ã—ãªã„ï¼‰
- å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹æƒ…å ±ã¯æœ€å°é™ã«ç•™ã‚ã€ã§ãã‚‹ã ã‘ã‚·ãƒ³ãƒ—ãƒ«ãªç”»é¢ã‚’ç¶­æŒã—ã¾ã™
- èµ·å‹•é€Ÿåº¦ã«ã¯ã‚ã¾ã‚Šã“ã ã‚ã‚Šã¾ã›ã‚“ã€‚æ°—ã«ãªã‚‰ãªã„ç¨‹åº¦ã®é€Ÿåº¦ã§ã‚ã‚Œã°ã‚ˆã—ã¨ã—ã¦ã„ã¾ã™ï¼ˆæ²¼ã™ãã‚‹ã®ã§â€¦ï¼‰

# ã‚ãŸã—ã®ä½¿ã„æ–¹

- OS ã¯ macOSã€ã¾ãŸã¯ Linux ã‚’ä½¿ã„ã¾ã™
- ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã¯ Wezterm ã§ã™
- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã€Git ã®æ“ä½œãªã©ã€ã ã„ãŸã„ã‚’ Neovim ã®ä¸­ã§è¡Œã„ã¾ã™
- ã‚¿ãƒ–ã¯ã»ã¨ã‚“ã©ä½¿ã„ã¾ã›ã‚“
- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã®å¤‰æ›´ã‚„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ“ä½œã«ã¯ãƒã‚¦ã‚¹ã‚’ä½¿ã†ã“ã¨ã‚‚ã‚ã‚Šã¾ã™

# è¨­å®š

## ã‚ªãƒ—ã‚·ãƒ§ãƒ³

Vim ã‚’åˆã‚ã¦è§¦ã£ãŸã¨ãã‹ã‚‰ãã®ã¾ã¾ã«ãªã£ã¦ã„ã‚‹ç®‡æ‰€ã‚‚ã‚ã‚‹ã®ã§ã€ãƒ–ãƒ©ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—ã‚’å…¼ã­ã¦ãã‚ãã‚ vimrc èª­æ›¸ä¼šã§èª­ã‚“ã§ã„ãŸã ãã®ã‚‚ã‚¢ãƒªã‹ãªâ€¦ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

:::details options.lua

```lua
local opt = vim.opt

-- æ–‡å­—ã‚³ãƒ¼ãƒ‰
vim.scriptencoding = 'utf-8'
opt.encoding = 'utf-8'
opt.fileencoding = 'utf-8'

-- 24bitã‚«ãƒ©ãƒ¼
opt.termguicolors = true

-- statusline ã‚’ä¸‹éƒ¨ã«å›ºå®š
opt.laststatus = 3

-- intro ã‚’éè¡¨ç¤º
opt.shortmess = 'I'

-- è¡Œ
opt.number = false
opt.signcolumn = 'yes'
opt.cursorline = true

-- ãƒ˜ãƒ«ãƒ—ã®è¨€èª
opt.helplang = 'ja'

-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—, ã‚¹ãƒ¯ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«
opt.backup = false
opt.swapfile = false

-- bufferåˆ‡ã‚Šæ›¿ãˆæ™‚ã®æœªä¿å­˜è­¦å‘Šã‚’ã‚ªãƒ•
opt.hidden = true

-- è¡Œæœ«ã¾ã§ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•å¯èƒ½ã«
opt.virtualedit = 'onemore'

-- ãƒã‚¦ã‚¹æ“ä½œæœ‰åŠ¹åŒ–
opt.mouse = 'a'

-- ä¸å¯è¦–æ–‡å­—å¯è¦–åŒ–
opt.list = true
opt.listchars = { tab = '>>', trail = '-', nbsp = '+' }

-- ã‚¿ãƒ–, ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ
opt.tabstop = 2
opt.expandtab = true
opt.shiftwidth = 2
opt.smartindent = true

-- æ¤œç´¢
opt.ignorecase = true
opt.smartcase = true
opt.incsearch = true

-- ãƒ’ã‚¹ãƒˆãƒªã®ä¸Šé™
opt.history = 512

-- è£œå®Œ
opt.completeopt = 'menuone,noinsert'

-- LSPã®è­¦å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
-- ref: https://dev.classmethod.jp/articles/eetann-change-neovim-lsp-diagnostics-format/
vim.lsp.handlers['textDocument/publishDiagnostics'] = vim.lsp.with(vim.lsp.diagnostic.on_publish_diagnostics, {
  virtual_text = {
    format = function(diagnostic)
      return string.format('%s (%s: %s)', diagnostic.message, diagnostic.source, diagnostic.code)
    end,
  },
})

-- è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ç„¡è¦–ã—ã¦ä¿å­˜
vim.api.nvim_create_user_command('W', 'noautocmd w', {})
```

:::

ã“ã®ãªã‹ã§~~åœ°å‘³ã«~~é‡å®ã—ã¦ã„ã‚‹ã®ãŒã€ä¸å¯è¦–æ–‡å­—ã‚’è¦‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹è¨­å®šã§ã™ã€‚

```lua
-- ä¸å¯è¦–æ–‡å­—å¯è¦–åŒ–
opt.list = true
opt.listchars = { tab = '>>', trail = '-', nbsp = '+' }
```

æ™®æ®µã¯ã‚ã¾ã‚Šãªã„ã§ã™ãŒã€ä»–ã®æ–¹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è§¦ã‚‹éš›ã«ã€Œã“ã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯â€¦ã‚¹ãƒšãƒ¼ã‚¹ã˜ã‚ƒâ€¦ãªã„â€¦ï¼ï¼Ÿã€ã£ã¦ãªã‚‹æ™‚ãŒã‚ã‚‹ã®ã§åŠ©ã‹ã£ã¦ã„ã¾ã™ã€‚

ã¾ãŸã€LSP ã®è­¦å‘Šã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å¤‰æ›´ã—ã¦ä½•ãŒè­¦å‘Šã‚’å‡ºã—ã¦ã„ã‚‹ã®ã‹ã‚ã‹ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

![è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ§˜å­](/images/aa2605c67efdb0/lsp-source.png)

ã“ã¡ã‚‰ã®è¨­å®šã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚

https://dev.classmethod.jp/articles/eetann-change-neovim-lsp-diagnostics-format/

## ã‚­ãƒ¼ãƒãƒƒãƒ—

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ä¾å­˜ã—ãªã„ã‚­ãƒ¼ãƒãƒƒãƒ—ã®è¨­å®šã‚’ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

:::details keymaps.lua

```lua
local h = require('util.helper')

-- ãƒªãƒ¼ãƒ€ãƒ¼ã‚­ãƒ¼
vim.g.mapleader = ' '

-- è¡Œç§»å‹•
h.nmap('j', 'gj')
h.nmap('k', 'gk')
h.nmap('gj', 'j')
h.nmap('gk', 'k')

-- ã‚¿ãƒ–
h.nmap(']t', '<CMD>tabnext<CR>', { desc = 'Switch to next tab' })
h.nmap('[t', '<CMD>tabprevious<CR>', { desc = 'Switch to previous tab' })

-- ãƒãƒƒãƒ•ã‚¡
h.nmap(']b', '<CMD>bnext<CR>', { desc = 'Switch to next buffer' })
h.nmap('[b', '<CMD>bprevious<CR>', { desc = 'Switch to previous buffer' })

-- ãƒã‚¤ãƒ©ã‚¤ãƒˆè§£é™¤
h.nmap('<ESC><ESC>', '<CMD>nohlsearch<CR>', { desc = 'Unhighlight' })

-- ãƒ’ã‚¹ãƒˆãƒªé¸æŠ
h.omap('<C-p>', '<Up>')
h.omap('<C-n>', '<Down>')

-- quickfix
h.nmap('[q', '<Cmd>cprevious<CR>')
h.nmap(']q', '<Cmd>cnext<CR>')

-- ESCã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’æŠœã‘ã‚‹
h.tmap('<ESC>', '<C-\\><C-n>')
```

:::

ãƒ‡ã‚«ãã¦æŠ¼ã—ã‚„ã™ã„ã®ã§ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚­ãƒ¼ã¯ã‚¹ãƒšãƒ¼ã‚¹ã«å‰²ã‚Šã‚ã¦ã¦ã„ã¾ã™ã€‚

```lua
-- ãƒªãƒ¼ãƒ€ãƒ¼ã‚­ãƒ¼
vim.g.mapleader = ' '
```

ã¾ãŸã€è¡¨ç¤ºè¡Œå˜ä½ã§ç§»å‹•ã§ãã‚‹ã»ã†ãŒå¥½ã¿ãªã®ã§ `j` `k` ã‚’ `gj` `gk` ã¨å…¥ã‚Œæ›¿ãˆã¦ã„ã¾ã™ã€‚

```lua
-- è¡Œç§»å‹•
h.nmap('j', 'gj')
h.nmap('k', 'gk')
h.nmap('gj', 'j')
h.nmap('gk', 'k')
```

å°‘ã—å‰ã¾ã§ã¯ `<ESC>` ã‚’ `jj` ã«å‰²ã‚Šå½“ã¦ãŸã‚Šã‚‚ã—ã¦ã„ã¾ã—ãŸãŒã€Vim ã§ã¯ãªã„ã¨ã“ã‚ã§ã‚‚ `jj` ã‚’æ‰“ã¡ã¾ãã‚‹äººé–“ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã‚„ã‚ã¾ã—ãŸã€‚

# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

ä»¥ä¸‹ã€å°å…¥ã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã«ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼

### lazy.nvim

![lazy.nvim](/images/aa2605c67efdb0/lazy.png)

æœ€è¿‘ã‚ˆãèãã€ãƒ¢ãƒ€ãƒ³ãªæ„Ÿã˜ã® Lua è£½ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã™ã€‚

https://github.com/folke/lazy.nvim

ä»¥å‰ã¯ dein.vim ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Lua ã¸ç§»è¡Œã™ã‚‹éš›ã«ã“ã¡ã‚‰ã¸ä¹—ã‚Šæ›ãˆã¾ã—ãŸã€‚

ç°¡å˜ã«æ‰±ãˆã¦ãƒªãƒƒãƒãª UI ãŒä»˜ã„ã¦ãã‚‹ã®ãŒå¥½ããªã¨ã“ã‚ãªã®ã§ã™ãŒã€é…å»¶èª­ã¿è¾¼ã¿ã«ã¤ã„ã¦ã¯ dein.vim ã®æ–¹ãŒã‚«ãƒªã‚«ãƒªã«ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã§ããã†ã§ã™ã€‚

## ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ 

### iceberg.vim

æš—ã‚ã®ãƒ–ãƒ«ãƒ¼ã‚’åŸºèª¿ã¨ã—ãŸã€è½ã¡ã¤ã„ãŸé›°å›²æ°—ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ã§ã™ã€‚

https://github.com/cocopon/iceberg.vim

å®šæœŸçš„ã«ä»–ã®ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ ã‚‚è©¦ã—ã¦ã¿ã‚‹ã®ã§ã™ãŒã€çµå±€ã“ã‚Œã«å¸°ã£ã¦ãã¦ã—ã¾ã„ã¾ã™ã€‚

## ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼

### telescope.nvim

![telescope](/images/aa2605c67efdb0/telescope.png)

Neovim ã«ãŠã‘ã‚‹å®šç•ªã«ãªã£ã¦ã„ãã†ãªãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ï¼ˆã‚ã„ã¾ã„æ¤œç´¢ï¼‰ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/nvim-telescope/telescope.nvim

ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œç´¢ã‚„ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãª grep ã‚„ LSP ã®ã‚¨ãƒ©ãƒ¼æ¤œç´¢ãªã©ã€è‰²ã€…ãªæ“ä½œã‚’ã“ã‚Œã²ã¨ã¤ã§è¡Œã£ã¦ã„ã¾ã™ã€‚

ãƒ“ãƒ«ãƒ‰ã‚¤ãƒ³ã®æ©Ÿèƒ½ã«åŠ ãˆã¦ã€ä»¥ä¸‹ã®æ‹¡å¼µãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚

#### telescope-file-browser.nvim

ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼ã®æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/nvim-telescope/telescope-file-browser.nvim

#### telescope-kensaku.nvim

ãƒ­ãƒ¼ãƒå­—ã§ã®æ—¥æœ¬èªæ¤œç´¢ã‚’æä¾›ã™ã‚‹ [kensaku.vim](https://github.com/lambdalisue/kensaku.vim) ã‚’åˆ©ç”¨ã—ã¦ã€å…¨æ–‡æ¤œç´¢ã‚’ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/Allianaab2m/telescope-kensaku.nvim

#### telescope-ui-select.nvim

`vim.ui.select` ã‚’ Telescope ã«ç½®ãã‹ãˆã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/nvim-telescope/telescope-ui-select.nvim

## LSP

Neovim çµ„è¾¼ã¿ã® LSP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ã†ãŸã‚ã«ä»¥ä¸‹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã—ã¦ã„ã¾ã™ã€‚

- LSP ã®è¨­å®šï¼š[nvim-lspconfig](https://github.com/neovim/nvim-lspconfig)
- è¨€èªã‚µãƒ¼ãƒãƒ¼ã®ç®¡ç†ï¼š[mason.nvim](https://github.com/williamboman/mason.nvim)
  - lspconfig ã¨ã®é€£æºï¼š[mason-lspconfig.nvim](https://github.com/williamboman/mason-lspconfig.nvim)

### null-ls.nvim

LSP ã«å¯¾å¿œã—ã¦ã„ãªã„ Linter ã‚„ Formatterï¼ˆTextlint ã‚„ Prettier ãªã©ï¼‰ã‚’æ‰±ã†ãŸã‚ã«ä½¿ã£ã¦ã„ã¾ã™ã€‚

https://github.com/jose-elias-alvarez/null-ls.nvim

## mini.nvim

å°ã•ãª Lua è£½ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŸã¡ã®é›†åˆä½“ã§ã™ã€‚
ã‚ãŸã—ã¯ã¾ã‚‹ã”ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ãŒã€å€‹åˆ¥ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚ã§ãã¾ã™ã€‚

https://github.com/echasnovski/mini.nvim

### mini.comment

ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã«åˆã‚ã›ã¦ã€ã„ã„æ„Ÿã˜ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã¦ãã‚Œã¾ã™ã€‚

https://github.com/echasnovski/mini.comment

### mini.indentscope

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/mini-indentscope.gif)

ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®ç¯„å›²ã‚’è¦‹ã‚„ã™ãã—ã¦ãã‚Œã¾ã™ã€‚
ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆé–¢ä¿‚ã®ãƒ†ã‚­ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚

https://github.com/echasnovski/mini.indentscope

### mini.pairs

å¯¾å¿œã™ã‚‹æ‹¬å¼§ã‚’è‡ªå‹•ã§æŒ¿å…¥ã—ã¦ãã‚Œã¾ã™ã€‚

https://github.com/echasnovski/mini.pairs

### mini.splitjoin

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/mini-splitjoin.gif)

è¤‡æ•°ã®å¼•æ•°ã‚’ä¸€ç™ºã§åˆ†å‰²ãƒ»çµåˆã—ã¦ãã‚Œã¾ã™ã€‚

https://github.com/echasnovski/mini.splitjoin

### mini.statusline

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/mini-statusline.png)

ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ©ã‚¤ãƒ³ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/echasnovski/mini.statusline

ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚

:::details mini.lua

```lua
require('mini.statusline').setup({
  content = {
      active = function()
        local mode, mode_hl    = MiniStatusline.section_mode({ trunc_width = 9999 }) -- å¸¸ã«Shortè¡¨ç¤º
        local git              = MiniStatusline.section_git({ trunc_width = 75 })
        local diagnostics      = MiniStatusline.section_diagnostics({ trunc_width = 75 })
        local filename         = MiniStatusline.section_filename({ trunc_width = 140 })
        local fileinfo         = MiniStatusline.section_fileinfo({ trunc_width = 120 })
        local location         = MiniStatusline.section_location({ trunc_width = 9999 }) -- å¸¸ã«Shortè¡¨ç¤º

        local get_lsp_progress = function()
          local prog = vim.lsp.util.get_progress_messages()[1]
          if not prog then return '' end

          local title = prog.title or ''
          local per = prog.percentage or 0

          return string.format('%s (%s%%%%)', title, per)
        end

        return MiniStatusline.combine_groups({
          { hl = mode_hl,                 strings = { mode } },
          { hl = 'MiniStatuslineDevinfo', strings = { git, diagnostics } },
          '%<', -- Mark general truncate point
          { hl = 'MiniStatuslineFilename', strings = { filename } },
          '%=', -- End left alignment
          { hl = 'MiniStatuslineFilename', strings = { get_lsp_progress() } },
          { hl = 'MiniStatuslineFileinfo', strings = { fileinfo } },
          { hl = mode_hl,                  strings = { location } },
        })
      end,
      inactive = nil,
    },
    use_icons = true,
    set_vim_settings = false,
})

-- iceberg é¢¨ã®ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
local mini_statusline_colors = {
    MiniStatuslineModeNormal = { bg = '#818596', fg = '#17171b' },
    MiniStatuslineModeInsert = { bg = '#84a0c6', fg = '#161821' },
    MiniStatuslineModeVisual = { bg = '#b4be82', fg = '#161821' },
    MiniStatuslineModeReplace = { bg = '#e2a478', fg = '#161821' },
    MiniStatuslineModeCommand = { bg = '#818596', fg = '#17171b' },
    MiniStatuslineModeOther = { bg = '#0f1117', fg = '#3e445e' },
    MiniStatuslineDevinfo = { bg = '#2e313f', fg = '#6b7089' },
    MiniStatuslineFileinfo = { bg = '#2e313f', fg = '#6b7089' },
    MiniStatuslineInactive = { link = 'StatusLineNC' },
}

for group, conf in pairs(mini_statusline_colors) do
    vim.api.nvim_set_hl(0, group, conf)
end
```

:::

ç”»é¢å¹…ã‚’è¦‹ã¦è¡¨ç¤ºå†…å®¹ã‚’ç°¡ç•¥åŒ–ã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ã™ãŒã€å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã¨ä½ç½®ã®è¡¨ç¤ºã¯å¸¸ã«ç°¡ç•¥è¡¨ç¤ºã«ãªã‚‹ã‚ˆã†ã€å¤§ããªå€¤ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚

```lua
local mode, mode_hl = MiniStatusline.section_mode({ trunc_width = 9999 })
local location      = MiniStatusline.section_location({ trunc_width = 9999 })
```

ã¾ãŸã€ï¼ˆãªãã¦ã‚‚ã„ã„ã®ã§ã™ãŒï¼‰LSP ã®é€²æ—ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```lua
local get_lsp_progress = function()
  local prog = vim.lsp.util.get_progress_messages()[1]
  if not prog then return '' end

  local title = prog.title or ''
  local per = prog.percentage or 0

  return string.format('%s (%s%%%%)', title, per)
end

return MiniStatusline.combine_groups({
    -- ...
  { hl = 'MiniStatuslineFilename', strings = { get_lsp_progress() } },
    -- ...
})
```

é©ç”¨ã—ãŸã„ãƒã‚¤ãƒ©ã‚¤ãƒˆã¨è¡¨ç¤ºã—ãŸã„æ–‡å­—åˆ—ã‚’æ¸¡ã—ã¦ã‚ã’ã‚‹ã ã‘ãªã®ã§ã€ã¨ã¦ã‚‚ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ã„ã§ã™ã€‚

### mini.surround

æ‹¬å¼§ãƒ»å¼•ç”¨ç¬¦ã®æ“ä½œã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚

https://github.com/echasnovski/mini.surround

## å¤–è¦³ç³»

### nvim-treesitter

ä¸»ã«æ§‹æ–‡ãƒã‚¤ãƒ©ã‚¤ãƒˆç”¨ã«å…¥ã‚Œã¦ã„ã¾ã™ ğŸ¨

https://github.com/tree-sitter/tree-sitter

### nvim-highlight-colors

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/nvim-highlight-colors.png)

ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã®è‰²ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
Tailwind ã®è‰²æŒ‡å®šã«ã‚‚å¯¾å¿œã—ã¦ã„ã¦ã†ã‚Œã—ã„ã€‚

https://github.com/brenoprata10/nvim-highlight-colors

## å…¥åŠ›ç³»

### ddc.vim

Dark deno-powered ãªè‡ªå‹•è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
[Deno](https://deno.com) ã§ Vim ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã‚‹ãŸã‚ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ  [denops.vim](https://github.com/vim-denops/denops.vim) ã‚’ä½¿ã£ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

è£œå®Œå€™è£œã‚’å‡ºåŠ›ã™ã‚‹ `source` ã¨ãã®é †ä½ä»˜ã‘ã‚’è¡Œã† `filter` ã¨ãŒåˆ†é›¢ã•ã‚Œã¦ãŠã‚Šã€æ‹¡å¼µã—ã‚„ã™ã„ã®ãŒç‰¹å¾´ã‹ãªã¨æ€ã„ã¾ã™ã€‚

https://github.com/Shougo/ddc.vim
https://zenn.dev/shougo/articles/ddc-vim-beta

ä»¥ä¸‹ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚

#### UI

- è£œå®Œã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼š[pum.vim](https://github.com/Shougo/pum.vim)
- pum.vim ã¨ã®é€£æºï¼š[ddc-ui-pum](https://github.com/Shougo/ddc-ui-pum)

#### Sourceï¼ˆè£œå®Œå€™è£œï¼‰

- ç¾åœ¨ã®ãƒãƒƒãƒ•ã‚¡å†…ã®å˜èªï¼š[ddc-source-around](https://github.com/Shougo/ddc-source-around)
- LSPï¼š[ddc-source-nvim-lsp](https://github.com/Shougo/ddc-source-nvim-lsp)
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ï¼š[ddc-file](https://github.com/LumaKernel/ddc-source-file)

#### Filterï¼ˆå€™è£œã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰

- å…ˆé ­ãƒãƒƒãƒï¼š[ddc-filter-matcher_head](https://github.com/Shougo/ddc-filter-matcher_head)
- å€™è£œã‚’ãƒãƒƒãƒé †ã«ã‚½ãƒ¼ãƒˆï¼š[ddc-filter-sorter_rank](https://github.com/Shougo/ddc-filter-sorter_rank)
- å…¥åŠ›ã—ãŸæ–‡å­—åˆ—é•·ä»¥ä¸‹ã®å€™è£œã‚’é™¤å¤–ï¼š[ddc-filter-matcher_length](https://github.com/Shougo/ddc-filter-matcher_length)
- é‡è¤‡ã™ã‚‹å€™è£œã‚’é™¤å¤–ï¼š[ddc-filter-converter_remove_overlap](https://github.com/Shougo/ddc-filter-converter_remove_overlap)

#### ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

- é¸æŠå€™è£œã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š[denops-popup-preview.vim](https://github.com/matsui54/denops-popup-preview.vim)
- ã‚·ã‚°ãƒãƒãƒ£ãƒ¼ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š[denops-signature_help](https://github.com/matsui54/denops-signature_help)

### vim-vsnip

VSCode ã¨åŒã˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/hrsh7th/vim-vsnip

#### vim-vsnip-integ

çµ„è¾¼ã¿ã® LSP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„ ddc.vim ã¨é€£æºã™ã‚‹ãŸã‚ã«å…¥ã‚Œã¦ã„ã¾ã™ã€‚

https://github.com/hrsh7th/vim-vsnip-integ

### skkeleton

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/skk.png)

Vim å†…ã§ SKK ã«ã‚ˆã‚‹æ—¥æœ¬èªå…¥åŠ›ã‚’å¯èƒ½ã«ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
ã‚ãŸã—ãŒæœ€ã‚‚ä¾å­˜ã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚

https://github.com/vim-skk/skkeleton

OS å´ã® IME ã¨è¾æ›¸ã‚’å…±æœ‰ã™ã‚‹ãŸã‚ã«ã€èµ·å‹•æ™‚ã«ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã«ã‚ã‚‹è¾æ›¸ã‚’æ¢ã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

```lua
-- è¾æ›¸ã‚’æ¢ã™
local dictionaries = {}
local handle = io.popen('ls $HOME/.skk/*') -- ãƒ•ãƒ«ãƒã‚¹ã§å–å¾—
if handle then
for file in handle:lines() do
  table.insert(dictionaries, file)
end
handle:close()
end

vim.api.nvim_create_autocmd('User', {
pattern = 'skkeleton-initialize-pre',
callback = function()
  vim.fn['skkeleton#config']({
    eggLikeNewline = true,
    registerConvertResult = true,
    globalDictionaries = dictionaries,
  })
end
```

### nvim-ts-autotag

Treesitter ã‚’ä½¿ã£ã¦ HTML ã®é–‰ã˜ã‚¿ã‚°è£œå®Œãƒ»ã‚¿ã‚°ã®ãƒªãƒãƒ¼ãƒ ã‚’ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/windwp/nvim-ts-autotag

### dial.nvim

`<C-a>` `<C-x>` ã«ã‚ˆã‚‹å€¤ã®å¢—æ¸›ã‚’æ‹¡å¼µã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
æ—¥ä»˜ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã„ã„æ„Ÿã˜ã«å¢—æ¸›ã—ã¦ãã‚Œã‚‹ã»ã‹ã€Bool å€¤ã®åˆ‡ã‚Šæ›¿ãˆãªã©ã„ã‚ã„ã‚ã§ãã¡ã‚ƒã„ã¾ã™ã€‚

https://github.com/monaqa/dial.nvim

## Git ç³»

### neogit.nvim

Emacs ã§å‹•ä½œã™ã‚‹ Git ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ [Magit](https://magit.vc) ã®ã‚¯ãƒ­ãƒ¼ãƒ³ã§ã™ã€‚

https://github.com/TimUntersberger/neogit

### diffview.nvim

Git ã®å¤‰æ›´å·®åˆ†ã‚’ãƒªãƒƒãƒãª UI ã§è¦‹ã‚‰ã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/sindrets/diffview.nvim

ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´å±¥æ­´ãŒã¨ã¦ã‚‚è¦‹ã‚„ã™ã„ã§ã™ã€‚

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/diffview.png)

### git-messenger.vim

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/git-messenger.png)

ã‚«ãƒ¼ã‚½ãƒ«è¡Œã®ã‚³ãƒŸãƒƒãƒˆæƒ…å ±ã‚’ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
é¡ã£ã¦ç¢ºèªã§ãã‚‹ã»ã‹ã€ãã®å ´ã§ diff ã‚‚è¦‹ã‚‰ã‚Œã‚‹ã®ã§é‡å®ã—ã¦ã„ã¾ã™ã€‚

https://github.com/rhysd/git-messenger.vim

### gitsigns.nvim

Git ã®å¤‰æ›´çŠ¶æ…‹ã‚’è¡¨ç¤ºã•ã›ã‚‹ã®ã«ä½¿ã£ã¦ã„ã¾ã™ã€‚
ã“ã¡ã‚‰ã«ã‚‚ `Git blame` ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ãŒä½¿ã£ã¦ã„ã¾ã›ã‚“ã€‚

https://github.com/lewis6991/gitsigns.nvim

## ç§»å‹•ç³»

### chowcho.nvim

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/chowcho.png)

ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–“ã®ç§»å‹•ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/tkmpypy/chowcho.nvim

ã“ã¡ã‚‰ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã€`<C-w><C-w>` ã«å‰²ã‚Šã‚ã¦ã¦ã„ã¾ã™ã€‚

https://zenn.dev/kawarimidoll/articles/daa39da5838567

### fuzzy-motion.vim

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/fuzzy-motion.png)

ç”»é¢å†…ã®æ–‡å­—ã‚’æ¤œç´¢ã—ã¦ã€ãã“ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’é£›ã°ã™ã“ã¨ãŒã§ãã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
ãƒ­ãƒ¼ãƒå­—ã§ã®æ—¥æœ¬èªæ¤œç´¢ã‚’æä¾›ã™ã‚‹ [kensaku.vim](https://github.com/lambdalisue/kensaku.vim) ã¨é€£æºã•ã›ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚

https://github.com/yuki-yano/fuzzy-motion.vim

## ãã®ä»–

### vim-qfreplace

QuickFix ã®ç½®æ›ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚

https://github.com/thinca/vim-qfreplace

1. Telescope ã§ç½®æ›ã—ãŸã„æ–‡å­—åˆ—ã‚’ grep æ¤œç´¢
1. æ¤œç´¢çµæœã‚’`<C-q>` ã§ QuickFix ã«æµã—è¾¼ã‚€
1. `:Qfreplace` ã§ç½®æ›

ã®æµã‚Œã§ä½¿ã£ã¦ã„ã¾ã™ã€‚

### denops-translate.vim

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/denops-translate.png)

é¸æŠç¯„å›²ã‚’ç¿»è¨³ã—ã¦ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ˜ãƒ«ãƒ—ã‚’èª­ã‚€ã¨ãã«é‡å®ã—ã¦ã„ã¾ã™ã€‚

https://github.com/skanehira/denops-translate.vim

### bufpreview.vim

Markdown ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æä¾›ã—ã¦ãã‚Œã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã®åŒæœŸã‚‚ã—ã¦ãã‚Œã¾ã™ã€‚

https://github.com/kat0h/bufpreview.vim

### vim-floaterm

![ãƒ‡ãƒ¢](/images/aa2605c67efdb0/floaterm.png)

Vim å†…ã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ã„ã„æ„Ÿã˜ã«æ‰±ãˆã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
è‰²ã€…æ©Ÿèƒ½ãŒã‚ã‚‹ã‚ˆã†ã§ã™ãŒã€ã‚ã‚“ã¾ã‚Šä½¿ã„ã“ãªã›ã¦ã„ã¾ã›ã‚“ã€‚

https://github.com/voldikss/vim-floaterm

# ãŠã‚ã‚Šã«
